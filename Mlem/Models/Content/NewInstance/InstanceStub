//
//  InstanceStub.swift
//  Mlem
//
//  Created by Sjmarf on 09/02/2024.
//

import Dependencies
import SwiftUI

protocol InstanceStubProviding {
    var name: String { get }
    var apiClient: APIClient { get }
}

class InstanceStub: InstanceStubProviding {
    let name: String

    lazy var apiClient: APIClient = {
        let apiClient = APIClient(transport: { urlSession, urlRequest in try await urlSession.data(for: urlRequest) })
        if let url = URL(string: "https://\(name)/api/v3") {
            apiClient.session = .unauthenticated(url: url)
        }
        return apiClient
    }()
}
